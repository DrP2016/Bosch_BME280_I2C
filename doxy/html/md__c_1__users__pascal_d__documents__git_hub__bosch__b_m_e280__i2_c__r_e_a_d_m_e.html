<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BME280 Arduino Library: BOSCH BME280 Library for I2C Bus to use with Arduino IDE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BME280 Arduino Library
   &#160;<span id="projectnumber">v1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__c_1__users__pascal_d__documents__git_hub__bosch__b_m_e280__i2_c__r_e_a_d_m_e.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">BOSCH BME280 Library for I2C Bus to use with Arduino IDE </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Tested with ESP8266-12/-07 and Arduino IDE 1.6.13 including ESP8266 Core v2.3.0 </p><hr/>
<p> ### 1 - Create BME280 Sensor Node </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280_I2C BME280;</div></div><!-- fragment --> <hr/>
<p> ### 2 - Open I2C Bus on defined Pins </p><div class="fragment"><div class="line">{c++}</div><div class="line">Wire.begin(GPIO_I2C_SDA, GPIO_I2C_SCL);</div></div><!-- fragment --> <hr/>
<p> ### 3 - Init BME280 on I2C </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280.begin(BME280ADDR);</div></div><!-- fragment --> <hr/>
 <h3>4.1 - Read Data in 'Burst Mode' from BME280</h3>
<p>Use EITHER 'Burst' OR 'Single' Read on BME280 in one cycle! NOT BOTH ! </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280.read_adc_burst();</div></div><!-- fragment --> <hr/>
 <h3>4.2 - Read Data in 'Single Mode' from BME280</h3>
<p>Use EITHER 'Burst' OR 'Single' Read on BME280 in one cycle! NOT BOTH ! </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280.read_adc_single();</div></div><!-- fragment --> <hr/>
 <h3>5 - Print compensated BME280 ADC Data to Serial Output</h3>
<p>ADC Values are compensated with formulas from official Bosch BME280 datasheet. Default calculation precision is 32Bit Integer, return values are Unsigned 32Bit Integer. Temperature returns a Signed 32Bit Integer. Pressure features calculation with 64Bit Integer precision, this returns an Unsigned 32Bit Integer, too. Double Precision for Calculation is also available for all ADC values, return datatype is then 'double'. Return values of 32 and 64 Bit precision functions do not carry a decimal point. You have to divide them by 100. Divide by 1000 for Humidity.</p>
<p>The variable Precision is causing differences on Measurements.</p><ul>
<li>Temperature <div class="fragment"><div class="line">{c++}</div><div class="line">Serial.println( String(&quot;BME280 &gt;&gt; TEMP  &gt;&gt; I32 &gt;&gt; &quot;) + (int32_t) BME280.temperature()     + &quot; C&quot; );</div><div class="line">Serial.println( String(&quot;BME280 &gt;&gt; TEMP  &gt;&gt; DBL &gt;&gt; &quot;) + (double)  BME280.temperature_dbl() + &quot; C&quot; );</div></div><!-- fragment --></li>
<li>Pressure <div class="fragment"><div class="line">{c++}</div><div class="line">Serial.println( String(&quot;BME280 &gt;&gt; PRESS &gt;&gt; I32 &gt;&gt; &quot;) + (int32_t) BME280.pressure()        + &quot; Pa&quot; );</div><div class="line">Serial.println( String(&quot;BME280 &gt;&gt; PRESS &gt;&gt; I64 &gt;&gt; &quot;) + (int32_t) BME280.pressure_i64()    + &quot; Pa&quot; );</div><div class="line">Serial.println( String(&quot;BME280 &gt;&gt; PRESS &gt;&gt; DBL &gt;&gt; &quot;) + (double)  BME280.pressure_dbl()    + &quot; Pa&quot; );</div></div><!-- fragment --></li>
<li>Humidity <div class="fragment"><div class="line">{c++}</div><div class="line">Serial.println( String(&quot;BME280 &gt;&gt; HUMID &gt;&gt; I32 &gt;&gt; &quot;) + (int32_t) BME280.humidity()        + &quot; %rH&quot; );  </div><div class="line">Serial.println( String(&quot;BME280 &gt;&gt; HUMID &gt;&gt; DBL &gt;&gt; &quot;) + (double)  BME280.humidity_dbl()    + &quot; %rH&quot; );</div></div><!-- fragment --></li>
<li>Output <div class="fragment"><div class="line">{c++}</div><div class="line">BME280 &gt;&gt; TEMP  &gt;&gt; I32 &gt;&gt; 3007 C</div><div class="line">BME280 &gt;&gt; TEMP  &gt;&gt; DBL &gt;&gt; 30.07 C</div><div class="line"></div><div class="line">BME280 &gt;&gt; PRESS &gt;&gt; I32 &gt;&gt; 97911 Pa</div><div class="line">BME280 &gt;&gt; PRESS &gt;&gt; I64 &gt;&gt; 97911 Pa</div><div class="line">BME280 &gt;&gt; PRESS &gt;&gt; DBL &gt;&gt; 97998.85 Pa</div><div class="line"></div><div class="line">BME280 &gt;&gt; HUMID &gt;&gt; I32 &gt;&gt; 25023 %rH</div><div class="line">BME280 &gt;&gt; HUMID &gt;&gt; DBL &gt;&gt; 24.43 %rH</div></div><!-- fragment --> <hr/>
 <h3>6 - Optional Functions</h3>
</li>
</ul>
<p>This library offers extended functions to read the current Run State and write Oversampling Rates, StandBy Time, IIR Filter Coefficent and Mode to BME280.</p>
<p>The Sensor needs to be inited before using these functions!</p>
<h4>BME280 Run State - Reads the current Run State of the Sensor. See Table.</h4>
<table class="doxtable">
<tr>
<th align="center">Value (state) </th><th align="right">Description  </th></tr>
<tr>
<td align="center">-1 </td><td align="right">Sensor not inited </td></tr>
<tr>
<td align="center">0 </td><td align="right">Sensor in Pause </td></tr>
<tr>
<td align="center">1 </td><td align="right">NVM data are being copied </td></tr>
<tr>
<td align="center">2 </td><td align="right">Conversion and Storing Results is running </td></tr>
</table>
<p>You have can get the current Run State from the Sensor by running the following function: </p><div class="fragment"><div class="line">{c++}</div><div class="line">int8_t bme280state = BME280.state();</div></div><!-- fragment --> <h4>BME280 T_SB Settings - Controls inactive duration 't_standby' in normal mode. See Table.</h4>
<table class="doxtable">
<tr>
<th align="center">Value (t_sb) </th><th align="right">Time (ms)  </th></tr>
<tr>
<td align="center">0b000 </td><td align="right">0.5 </td></tr>
<tr>
<td align="center">0b001 </td><td align="right">62.5 </td></tr>
<tr>
<td align="center">0b010 </td><td align="right">125 </td></tr>
<tr>
<td align="center">0b011 </td><td align="right">250 </td></tr>
<tr>
<td align="center">0b100 </td><td align="right">500 </td></tr>
<tr>
<td align="center">0b101 </td><td align="right">1000 </td></tr>
<tr>
<td align="center">0b110 </td><td align="right">10 </td></tr>
<tr>
<td align="center">0b111 </td><td align="right">20 </td></tr>
</table>
<h4>BME280 FILTER Settings - Controls the time constant of the IIR filter. See Table.</h4>
<table class="doxtable">
<tr>
<th align="center">Value (filter) </th><th align="right">Coefficent  </th></tr>
<tr>
<td align="center">0b000 </td><td align="right">OFF </td></tr>
<tr>
<td align="center">0b001 </td><td align="right">x2 </td></tr>
<tr>
<td align="center">0b010 </td><td align="right">x4 </td></tr>
<tr>
<td align="center">0b011 </td><td align="right">x8 </td></tr>
<tr>
<td align="center">&gt;0b100 </td><td align="right">x16 </td></tr>
</table>
<p>You have to set the StandBy Time for "Normal Mode" and Filter Coefficent before writing it to the BME280 with this function: </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280.filter_config( uint8_t t_sb, uint8_t filter );</div></div><!-- fragment --><p>You now can write these settings to the Sensor. This is done by using the following function: </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280.filter_write();</div></div><!-- fragment --><h4>BME280 OSRS Settings - Controls the oversampling for measurements. See Table.</h4>
<table class="doxtable">
<tr>
<th align="center">Value (osrs_x) </th><th align="right">Rate  </th></tr>
<tr>
<td align="center">0b000 </td><td align="right">SKIPPED </td></tr>
<tr>
<td align="center">0b001 </td><td align="right">x1 </td></tr>
<tr>
<td align="center">0b010 </td><td align="right">x2 </td></tr>
<tr>
<td align="center">0b011 </td><td align="right">x4 </td></tr>
<tr>
<td align="center">0b100 </td><td align="right">x8 </td></tr>
<tr>
<td align="center">&gt;0b101 </td><td align="right">x16 </td></tr>
</table>
<p>You have to set the Oversampling Rates for Temperature, Pressure and Humidity before writing it to the BME280 with this function: </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280.osrs_config(uint8_t osrs_p,uint8_t osrs_t,uint8_t osrs_h);</div></div><!-- fragment --><p> You now can write these settings to the Sensor. This is done by using one of the following functions. Each of these Functions writes the Oversampling Rate AND the wished Sensor Mode: </p><div class="fragment"><div class="line">{c++}</div><div class="line">BME280.sleep();     // No readings are done, Registers are ok to read/write</div><div class="line">BME280.forced();        // One reading is done, then the Sensor is in Sleep Mode again</div><div class="line">BME280.normal();        // Continuous switching between reading and defined StandBy Time</div></div><!-- fragment --><hr/>
 <h3>Use DoxyGen (doxy/html/index.html) and Examples for further information</h3>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
